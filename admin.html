<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Admin - Daftar Pesanan</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
  <div class="bg-white rounded shadow-md p-6 max-w-3xl w-full">
    <h1 class="text-2xl font-bold mb-4 flex items-center gap-2">
      ğŸ“¦ Daftar Pesanan Berhasil
    </h1>
    <div id="order-list" class="space-y-4 text-sm text-gray-700">
      <p>â³ Memuat data...</p>
    </div>
  </div>

  <script>
    const orderList = document.getElementById("order-list");

    fetch("https://f232e6c6-0d39-457d-956a-42ef6e8fff59-00-3bgx654x4kes0.pike.replit.dev/api/admin/orders")
      .then(res => {
        if (!res.ok) throw new Error("Gagal fetch");
        return res.json();
      })
      .then(data => {
        if (!data.length) {
          orderList.innerHTML = `<p>â— Tidak ada data pesanan.</p>`;
          return;
        }

        orderList.innerHTML = ""; // Bersihkan loading text
        data.forEach(order => {
          const div = document.createElement("div");
          div.className = "bg-gray-50 p-4 rounded border";
          div.innerHTML = `
            <div><strong>ID Pesanan:</strong> ${order.order_id}</div>
            <div><strong>Total:</strong> Rp${parseInt(order.amount).toLocaleString("id-ID")}</div>
            <div><strong>Status:</strong> ${order.status}</div>
            <div><strong>Metode:</strong> ${order.method}</div>
            <div><strong>Dibayar Pada:</strong> ${new Date(order.paid_at).toLocaleString("id-ID")}</div>
          `;
          orderList.appendChild(div);
        });
      })
      .catch(err => {
        console.error("âŒ Gagal memuat:", err);
        orderList.innerHTML = `<p class="text-red-600">âŒ Gagal memuat data.</p>`;
      });
  </script>
</body>
</html>
